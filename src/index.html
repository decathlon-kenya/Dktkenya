<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.4.0/remixicon.css">
<link rel="stylesheet" href="mainke.css">
 

<!--- BANNERS START --->

<div class="_slider-container">
    <div class="_slider-inner">
        <div class="swiper _revamp">
            <div class="swiper-wrapper">

                <a href="https://www.decathlon.co.ke/16626-table-tennis" class="swiper-slide _revamp-slide">
                    <div class="slide-link-re">
                        <img src="black friday general.png"
                            alt="Gym Mats" class="slide-image">
                        <div class="image-gradient-overlay"></div>
                        <div class="slide-content">                                                                                                    
                            <div class="slide-title">Momements like this</div>
                            <button class="slide-button" aria-label="HOW MANY TO GO">HOW MANY TO GO</button>
                        </div>
                    </div>
                </a>

                <a href="decathlon.co.ke" class="swiper-slide _revamp-slide">
                    <div class="slide-link-re">
                        <img src="swimming constume.png"
                            alt="HOW MANY TO GO" class="slide-image">
                        <div class="image-gradient-overlay"></div>
                        <div class="slide-content">                                                                                                    
                            <div class="slide-title">People we are</div>
                            <button class="slide-button" aria-label="Buy Now">Buy Now</button>
                        </div>
                    </div>
                </a>

                <a href="decathlon.co.ke" class="swiper-slide _revamp-slide">
                    <div class="slide-link-re">
                        <img src="women hoodies.png"
                            alt="Tennis Short" class="slide-image">
                        <div class="image-gradient-overlay"></div>
                        <div class="slide-content">                                                                                                    
                            <div class="slide-title">Operation opeco</div>
                            <button class="slide-button" aria-label="Home Delivery">Home Delivery</button>
                        </div>
                    </div>
                </a>

                <a href="decathlon.co.ke" class="swiper-slide _revamp-slide">
                    <div class="slide-link-re">
                        <img src="water bottle.png"
                            alt="Shoes" class="slide-image">
                        <div class="image-gradient-overlay"></div>
                        <div class="slide-content">                                                                                                    
                            <div class="slide-title">This is how we do it</div>
                            <button class="slide-button" aria-label="Get Offer">Get Offer</button>
                        </div>
                    </div>
                </a>

                <a href="decathlon.co.ke" class="swiper-slide _revamp-slide">
                    <div class="slide-link-re">
                        <img src="skates helmet.png"
                            alt="Membership" class="slide-image">
                        <div class="image-gradient-overlay"></div>
                        <div class="slide-content">                                                                                                    
                            <div class="slide-title">Welcome to weG</div>
                            <button class="slide-button" aria-label="Why Today">Why Today</button>
                        </div>
                    </div>
                </a>

            </div>
            <button class="swiper-button-next" aria-label="Next slide"></button>
            <button class="swiper-button-prev" aria-label="Previous slide"></button>
            <span class="swiper-notification" aria-live="assertive"></span>
        </div>
    </div>
</div>
<div class="swiper-buttons-mobile">
    <div class="nav-buttons-left">
        <button class="nav-button-mobile prev" aria-label="Previous slide"> 
            <i class="ri-arrow-left-s-line"></i>
        </button>
        <button class="nav-button-mobile next" aria-label="Next slide"> 
            <i class="ri-arrow-right-s-line"></i>
        </button>
    </div>

    <div class="nav-buttons-right">
        <button class="nav-button-mobile play" id="playPauseButton" aria-label="Pause">
            <i class="ri-pause-line"></i>
        </button>
    </div>
</div>


<!--- BANNERS END --->


<!---VISUAL CATEGORIES START--->

<section class="container-vf">
    <div class="slider-wrapper-vf">
        <div class="slider-controls">
            <h2 class="category-title">Explore the best</h2>
            <div class="slider-nav-buttons">
                <button id="prev-slide-vf" class="prev-slide-vf slide-button-vf material-symbols-rounded"
                    aria-label="Previous">
                    <span><i class="ri-arrow-left-s-line"></i></span>
                </button>
                <button id="next-slide-vf" class="next-slide-vf slide-button-vf material-symbols-rounded"
                    aria-label="Next">
                    <span><i class="ri-arrow-right-s-line"></i></span>
                </button>
            </div>
        </div>
        <div class="sports-link">
            <a href="decathlon.co.ke">Go for All <i class="ri-arrow-right-s-line"></i></a>
        </div>
        <ul class="image-list-vf">

            <li>
                <a href="https://www.decathlon.co.ke/17576-walking-backpacks">
                    <img src="https://contents.mediadecathlon.com/p2583283/1cr1/k$d0dd4e77b2258dc73f779fcdb2789aa8/country-walking-backpack-nh100-20-litres.jpg?format=auto&f=768x0"
                        alt="Bike Discounts" />
                    <p>Backpacks <i class="ri-arrow-right-s-line"></i></p>
                </a>
            </li>

            <li>
                <a href="decathlon.co.ke">
                    <img src="https://contents.mediadecathlon.com/p2108764/k$6512ca6f8f9709ced8330a4673c1a61d/defaut.jpg?format=auto"
                        alt="Jackets" />
                    <p>Jackets <i class="ri-arrow-right-s-line"></i></p>
                </a>
            </li>

            <li>
                <a href="decathlon.co.ke">
                    <img src="https://contents.mediadecathlon.com/s1297356/k$b215b2823ba9a7e764c3b54643fc6eca/defaut.jpg?format=auto"
                        alt="Women" />
                    <p>Women <i class="ri-arrow-right-s-line"></i></p>
                </a>
            </li>

            <li>
                <a href="decathlon.co.ke">
                    <img src="https://contents.mediadecathlon.com/s1297356/k$b215b2823ba9a7e764c3b54643fc6eca/defaut.jpg?format=auto"
                        alt="Men Jackt" />
                    <p>Men Jackt <i class="ri-arrow-right-s-line"></i></p>
                </a>
            </li>

            <li>
                <a href="decathlon.co.ke">
                    <img src="https://contents.mediadecathlon.com/s1297356/k$b215b2823ba9a7e764c3b54643fc6eca/defaut.jpg?format=auto"
                        alt="Kids" />
                    <p>Kids <i class="ri-arrow-right-s-line"></i></p>
                </a>
            </li>

            <li>
                <a href="decathlon.co.ke">
                    <img src="https://contents.mediadecathlon.com/s1297356/k$b215b2823ba9a7e764c3b54643fc6eca/defaut.jpg?format=auto"
                        alt="Watches" />
                    <p>Watches <i class="ri-arrow-right-s-line"></i></p>
                </a>
            </li>

            <li>
                <a href="decathlon.co.ke">
                    <img src="https://contents.mediadecathlon.com/s1297356/k$b215b2823ba9a7e764c3b54643fc6eca/defaut.jpg?format=auto"
                        alt="Shoes Offer" />
                    <p>Shoes Offer <i class="ri-arrow-right-s-line"></i></p>
                </a>
            </li>

            <li>
                <a href="decathlon.co.ke">
                    <img src="https://contents.mediadecathlon.com/s1297356/k$b215b2823ba9a7e764c3b54643fc6eca/defaut.jpg?format=auto"
                        alt="Footall Ball" />
                    <p>Footall Ball <i class="ri-arrow-right-s-line"></i></p>
                </a>
            </li>

        </ul>
        <div class="slider-scrollbar-vf">
            <div class="scrollbar-track-vf">
                <div class="scrollbar-thumb-vf"></div>
            </div>
        </div>
    </div>
</section>

<!---VISUAL CATEGORIES END--->




<!---SEASON SPORTS START --->
<section class="season-sports">
    <div class="season-sports__container">
        <h2 class="sports-section-title">Top Categories for you</h2>
        <ul class="season-sports__list">

            <li class="season-sports__item">
                <a href="decathlon.co.ke" class="season-sports__card">
                    <div class="season-sports__image-wrapper">
                        <img src="https://contents.mediadecathlon.com/s1149685/k$941edbfbb59205da8ae2bd44e6618c71/1006pt1006/1567xcr1567/Fietsen%20-%20Sale%20Sticker%20-%208664452%20-%202000x2000.jpg?format=auto&f=512x0"
                            alt="Test Icon" class="season-sports__image">
                    </div>
                    <h3 class="season-sports__title">Test Icon <i class="ri-arrow-right-s-line"></i></h3>
                </a>
            </li>

            <li class="season-sports__item">
                <a href="decathlon.co.ke" class="season-sports__card">
                    <div class="season-sports__image-wrapper">
                        <img src="https://contents.mediadecathlon.com/p2108764/k$6512ca6f8f9709ced8330a4673c1a61d/defaut.jpg?format=auto&f=512x0"
                            alt="Jackets" class="season-sports__image">
                    </div>
                    <h3 class="season-sports__title">Jackets <i class="ri-arrow-right-s-line"></i></h3>
                </a>
            </li>

            <li class="season-sports__item">
                <a href="decathlon.co.ke" class="season-sports__card">
                    <div class="season-sports__image-wrapper">
                        <img src="https://contents.mediadecathlon.com/s1297356/k$b215b2823ba9a7e764c3b54643fc6eca/defaut.jpg?format=auto&f=512x0"
                            alt="Women" class="season-sports__image">
                    </div>
                    <h3 class="season-sports__title">Women <i class="ri-arrow-right-s-line"></i></h3>
                </a>
            </li>

            <li class="season-sports__item">
                <a href="decathlon.co.ke" class="season-sports__card">
                    <div class="season-sports__image-wrapper">
                        <img src="https://contents.mediadecathlon.com/s1297356/k$b215b2823ba9a7e764c3b54643fc6eca/defaut.jpg?format=auto&f=512x0"
                            alt="Men Jackt" class="season-sports__image">
                    </div>
                    <h3 class="season-sports__title">Men Jackt <i class="ri-arrow-right-s-line"></i></h3>
                </a>
            </li>

            <li class="season-sports__item">
                <a href="decathlon.co.ke" class="season-sports__card">
                    <div class="season-sports__image-wrapper">
                        <img src="https://contents.mediadecathlon.com/s1297356/k$b215b2823ba9a7e764c3b54643fc6eca/defaut.jpg?format=auto&f=512x0"
                            alt="Kids" class="season-sports__image">
                    </div>
                    <h3 class="season-sports__title">Kids <i class="ri-arrow-right-s-line"></i></h3>
                </a>
            </li>

        </ul>
    </div>
</section>
<!---SEASON SPORTS END--->

<!--- DEALS BANNER START --->
<!--- change theme class: sales, deals, blue or black-->
<a href="/content/226-kombiniraj-i-ustedi" class="nl-promo theme-black">
    <div class="nl-promo__inner">
        <div class="nl-promo__content">
            <h2 class="nl-promo__title">It's Black Friday</h2>
            <p class="nl-promo__text">
                The Count down have started. Are you ready to go?.
            </p>
            <span class="nl-promo__cta">See more <i class="ri-arrow-right-s-line"></i></span>
        </div>

        <div class="nl-promo__media">
            <img class="nl-promo__img"
                src="https://contents.mediadecathlon.com/p2712838/k$9ce3805d8776f8ae00ecb9d5d27c7c88/defaut.jpg?format=auto&f=640x0"
                alt="Kombinacija za nogomet">
            <img class="nl-promo__badge"
                src="https://contents.mediadecathlon.com/p2640344/k$ce2431743e5a4275ef40b198e48b1a45/defaut.jpg?format=auto"
                alt="Kombinacija za koÅ¡arku">
        </div>
    </div>
</a>
<!--- DEALS BANNER END --->


<!--- POPULAR CATEGORIES GALLERY START --->
<section class="catdeck" id="catdeck">
    <div class="catdeck__left">
        <span class="catdeck__eyebrow">Trending Categories</span>
        <ul class="catdeck__list">
            <li><a href="decathlon.co.ke" class="catdeck__link" data-img="idone">Tennis Shoes <i
                    class="ri-arrow-right-line"></i></a>
            </li>
            <li><a href="decathlon.co.ke" class="catdeck__link" data-img="idtwo">Running <i
                    class="ri-arrow-right-line"></i></a>
            </li>
            <li><a href="decathlon.co.ke" class="catdeck__link" data-img="idthree">Hiking <i
                    class="ri-arrow-right-line"></i></a>
            </li>
            <li><a href="decathlon.co.ke" class="catdeck__link" data-img="idfour">Fishing <i
                    class="ri-arrow-right-line"></i></a>
            </li>
            <li><a href="decathlon.co.ke" class="catdeck__link" data-img="idfive">Karate <i
                    class="ri-arrow-right-line"></i></a>
            </li>
            <li><a href="decathlon.co.ke" class="catdeck__link" data-img="idsix">Cycling <i
                    class="ri-arrow-right-line"></i></a>
            </li>
        </ul>
    </div>
    <div class="catdeck__right" id="deck">
        <img class="catdeck__img" data-img="idone"
            src="https://contents.mediadecathlon.com/p2387060/k$7d95cf4dd78037a1934f0333f0f001d7/defaut.jpg?format=auto&f=969x0&f=969x0"
            alt="Tennis Shoes">
        <img class="catdeck__img" data-img="idtwo"
            src="https://contents.mediadecathlon.com/p2387060/k$7d95cf4dd78037a1934f0333f0f001d7/defaut.jpg?format=auto&f=969x1&f=969x0"
            alt="Running">
        <img class="catdeck__img" data-img="idthree"
            src="https://contents.mediadecathlon.com/p2387060/k$7d95cf4dd78037a1934f0333f0f001d7/defaut.jpg?format=auto&f=969x2&f=969x0"
            alt="Hiking">
        <img class="catdeck__img" data-img="idfour"
            src="https://contents.mediadecathlon.com/p2387060/k$7d95cf4dd78037a1934f0333f0f001d7/defaut.jpg?format=auto&f=969x3&f=969x0"
            alt="Fishing">
        <img class="catdeck__img" data-img="idfive"
            src="https://contents.mediadecathlon.com/p2387060/k$7d95cf4dd78037a1934f0333f0f001d7/defaut.jpg?format=auto&f=969x4&f=969x0"
            alt="Karate">
        <img class="catdeck__img" data-img="idsix"
            src="https://contents.mediadecathlon.com/p2387060/k$7d95cf4dd78037a1934f0333f0f001d7/defaut.jpg?format=auto&f=969x5&f=969x0"
            alt="Cycling">
    </div>
</section>
<!--- POPULAR CATEGORIES GALLERY END --->



<!--- POPULAR LINKS START --->
<section class="container-popular-links">
    <h3>SPORS FOR YOU</h3>
    <ul class="box-popular-links">
        <li class="column-popular-links">
            <a href="decathlon.co.ke" class="link-popular-links">Running <img
                src="https://contents.mediadecathlon.com/p2131458/k$6185b3e6d76770102bf16f96173e5a53/2000pt2143/4000xcr2595/RIVERSIDE%20RIVERSIDE%20500%20BLEU%20FONCE.jpg?format=auto"
                alt="Running"></a>
            <br>
            <a href="decathlon.co.ke" class="link-popular-links">Running <img
                src="https://contents.mediadecathlon.com/p2131458/k$6185b3e6d76770102bf16f96173e5a53/2000pt2143/4000xcr2595/RIVERSIDE%20RIVERSIDE%20500%20BLEU%20FONCE.jpg?format=auto"
                alt="Running"></a>
            <br>
            <a href="decathlon.co.ke" class="link-popular-links">Running <img
                src="https://contents.mediadecathlon.com/p2131458/k$6185b3e6d76770102bf16f96173e5a53/2000pt2143/4000xcr2595/RIVERSIDE%20RIVERSIDE%20500%20BLEU%20FONCE.jpg?format=auto"
                alt="Running"></a>
        </li>
        <li class="column-popular-links">
            <a href="decathlon.co.ke" class="link-popular-links">Running <img
                src="https://contents.mediadecathlon.com/p2131458/k$6185b3e6d76770102bf16f96173e5a53/2000pt2143/4000xcr2595/RIVERSIDE%20RIVERSIDE%20500%20BLEU%20FONCE.jpg?format=auto"
                alt="Running"></a>
            <br>
            <a href="decathlon.co.ke" class="link-popular-links">Running <img
                src="https://contents.mediadecathlon.com/p2131458/k$6185b3e6d76770102bf16f96173e5a53/2000pt2143/4000xcr2595/RIVERSIDE%20RIVERSIDE%20500%20BLEU%20FONCE.jpg?format=auto"
                alt="Running"></a>
            <br>
            <a href="decathlon.co.ke" class="link-popular-links">Running <img
                src="https://contents.mediadecathlon.com/p2131458/k$6185b3e6d76770102bf16f96173e5a53/2000pt2143/4000xcr2595/RIVERSIDE%20RIVERSIDE%20500%20BLEU%20FONCE.jpg?format=auto"
                alt="Running"></a>
        </li>
    </ul>
</section>
<!--- POPULAR LINKS END --->


<!--- ONESHOP RECOMMENDED MODULE PRODUCTS --->
<div class="homepage-component" style="padding: 0 10px 0 10px; max-width: 1800px; margin: 0 auto 50px auto;">
    <os-recommendations algorithm='PERSONALIZED_RECO' listName='home_reco_pe_perso'></os-recommendations>
</div>


<section class="container-vf"
        x-data="KE_products()" 
        x-intersect.once="getProductsManual(['4127173', '4016197', '4548726', '4714062', '4270327', '2640040'])">

        <div class="KE-carousel-header">
            <h2 class="category-title">Explore the best</h2>
            <div class="KE-carousel-nav">
                <button @click="prev()">
                    <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>
                </button>
                <button @click="next()">
                    <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>
                </button>
            </div>
        </div>
        
        <div x-show="loading">Loading products...</div>
        <div x-show="error" class="KE-error-message" x-text="error"></div>

        <div class="KE-carousel-container" x-ref="carousel" x-show="!loading && !error">
            <template x-for="product in products" :key="product.objectID">
                <div class="KE-product-card">
                    <a :href="product.url" class="KE-product-link">
                        <img class="KE-product-image" :src="updateImageUrl(product.image_url)" :alt="product.product_name">
                        <div class="KE-product-info">
                            <div class="KE-product-brand" x-text="product.brand"></div>
                            <div class="KE-product-name" x-text="product.product_name"></div>
                            <div class="KE-price-container">
                                
                                <span :class="product.regular && product.regular > product.prix ? 'KE-product-price-discount' : 'KE-product-price'">
                                    <span x-text="'KES ' + product.prix.toLocaleString('en-US')"></span>
                                </span>
                                
                                <template x-if="product.regular && product.regular > product.prix">
                                    <span class="KE-old-price">
                                        <span x-text="'KES ' + product.regular.toLocaleString('en-US')"></span>
                                    </span>
                                </template>
                                <template x-if="product.percentoff && product.percentoff > 0">
                                    <span class="KE-discount-badge">
                                        -<span x-text="product.percentoff.toFixed(0)"></span>%
                                    </span>
                                </template>
                            </div>
                        </div>
                    </a>
                </div>
            </template>
        </div>
    </section>

    <section class="container-vf"
        x-data="KE_products()" 
        x-init="getProductsFromCategory(10, 16532, ['4548726'], { min: 100, max: 10000 })" 
        style="margin-top: 40px;">

        <div class="KE-carousel-header">
            <h2 class="category-title">Mixed</h2>
            <div class="KE-carousel-nav">
                <button @click="prev()">
                    <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>
                </button>
                <button @click="next()">
                    <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>
                </button>
            </div>
        </div>
        
        <div x-show="loading">Loading products...</div>
        <div x-show="error" class="KE-error-message" x-text="error"></div>

        <div class="KE-carousel-container" x-ref="carousel" x-show="!loading && !error">
            <template x-for="product in products" :key="product.objectID">
                <div class="KE-product-card">
                    <a :href="product.url" class="KE-product-link">
                        
                        <div class="KE-product-sticker KE-sticker-yellow">
                            Black Friday
                        </div>
                        
                        <img class="KE-product-image" :src="updateImageUrl(product.image_url)" :alt="product.product_name">
                        <div class="KE-product-info">
                            <div class="KE-product-brand" x-text="product.brand"></div>
                            <div class="KE-product-name" x-text="product.product_name"></div>
                            <div class="KE-price-container">

                                <span :class="product.regular && product.regular > product.prix ? 'KE-product-price-discount' : 'KE-product-price'">
                                    <span x-text="'KES ' + product.prix.toLocaleString('en-US')"></span>
                                </span>

                                <template x-if="product.regular && product.regular > product.prix">
                                    <span class="KE-old-price">
                                        <span x-text="'KES ' + product.regular.toLocaleString('en-US')"></span>
                                    </span>
                                </template>
                                <template x-if="product.percentoff && product.percentoff > 0">
                                    <span class="KE-discount-badge">
                                        -<span x-text="product.percentoff.toFixed(0)"></span>%
                                    </span>
                                </template>
                            </div>
                        </div>
                    </a>
                </div>
            </template>
        </div>
    </section>

    <section class="container-vf"
        x-data="KE_products()" 
        x-init="getProductsFromCategory(10, 16532, ['4548726'], { min: 1100, max: 100000 })" 
        style="margin-top: 40px;">

        <div class="KE-carousel-header">
            <h2 class="category-title">Explore the best2</h2>
            <div class="KE-carousel-nav">
                <button @click="prev()">
                    <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>
                </button>
                <button @click="next()">
                    <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>
                </button>
            </div>
        </div>
        
        <div x-show="loading">Loading products...</div>
        <div x-show="error" class="KE-error-message" x-text="error"></div>

        <div class="KE-carousel-container" x-ref="carousel" x-show="!loading && !error">
            <template x-for="product in products" :key="product.objectID">
                <div class="KE-product-card">
                    <a :href="product.url" class="KE-product-link">
                        
                        <div class="KE-product-sticker KE-sticker-yellow">
                            Black Friday
                        </div>
                        
                        <img class="KE-product-image" :src="updateImageUrl(product.image_url)" :alt="product.product_name">
                        <div class="KE-product-info">
                            <div class="KE-product-brand" x-text="product.brand"></div>
                            <div class="KE-product-name" x-text="product.product_name"></div>
                            <div class="KE-price-container">

                                <span :class="product.regular && product.regular > product.prix ? 'KE-product-price-discount' : 'KE-product-price'">
                                    <span x-text="'KES ' + product.prix.toLocaleString('en-US')"></span>
                                </span>

                                <template x-if="product.regular && product.regular > product.prix">
                                    <span class="KE-old-price">
                                        <span x-text="'KES ' + product.regular.toLocaleString('en-US')"></span>
                                    </span>
                                </template>
                                <template x-if="product.percentoff && product.percentoff > 0">
                                    <span class="KE-discount-badge">
                                        -<span x-text="product.percentoff.toFixed(0)"></span>%
                                    </span>
                                </template>
                            </div>
                        </div>
                    </a>
                </div>
            </template>
        </div>
    </section>








<section class="container-vf"
        x-data="KE_products()" 
        x-init="getProductsFromCategory(10, 17806, ['2247457', '4016197'], { min: 100, max: 5000 })" 
        style="margin-top: 40px;">

    <div class="KE-carousel-header">
        <h2 class="category-title">Explore the best</h2>
        <div class="KE-carousel-nav">
            <button @click="prev()">
                <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>
            </button>
            <button @click="next()">
                <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>
            </button>
        </div>
    </div>
    
    <div x-show="loading">Loading products...</div>
    <div x-show="error" class="KE-error-message" x-text="error"></div>

    <div class="KE-carousel-container" x-ref="carousel" x-show="!loading && !error">
        <template x-for="product in products" :key="product.objectID">
            <div class="KE-product-card">
                <a :href="product.url" class="KE-product-link">
                    
                        <div class="KE-product-sticker KE-sticker-black">
                            Black November
                        </div>
                    <img class="KE-product-image" :src="updateImageUrl(product.image_url)" :alt="product.product_name">
                    <div class="KE-product-info">
                        <div class="KE-product-brand" x-text="product.brand"></div>
                        <div class="KE-product-name" x-text="product.product_name"></div>
                        <div class="KE-price-container">
                            
                            <span :class="product.regular && product.regular > product.prix ? 'KE-product-price-discount' : 'KE-product-price'">
                                <span x-text="'KES ' + product.prix.toLocaleString('en-US')"></span>
                            </span>
                            
                            <template x-if="product.regular && product.regular > product.prix">
                                <span class="KE-old-price">
                                    <span x-text="'KES ' + product.regular.toLocaleString('en-US')"></span>
                                </span>
                            </template>
                            <template x-if="product.percentoff && product.percentoff > 0">
                                <span class="KE-discount-badge">
                                    -<span x-text="product.percentoff.toFixed(0)"></span>%
                                </span>
                            </template>
                        </div>
                    </div>
                </a>
            </div>
        </template>
    </div>
</section>
<!---PRODUCTS START--->


<section class="container-vf"
        x-data="KE_products()" 
        x-intersect.once="getProductsManual(['4127173', '4016197', '4548726', '4714062', '4270327', '2640040'])">

    <div class="KE-carousel-header">
        <h2 class="category-title">Deals for you!</h2>
        <div class="KE-carousel-nav">
            <button @click="prev()">
                <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>
            </button>
            <button @click="next()">
                <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>
            </button>
        </div>
    </div>
    
    <div x-show="loading">Loading products...</div>
    <div x-show="error" class="KE-error-message" x-text="error"></div>

    <div class="KE-carousel-container" x-ref="carousel" x-show="!loading && !error">
        <template x-for="product in products" :key="product.objectID">
            <div class="KE-product-card">
                <a :href="product.url" class="KE-product-link">
                    
                        <div class="KE-product-sticker KE-sticker-black">
                            Black November
                        </div>
                    <img class="KE-product-image" :src="updateImageUrl(product.image_url)" :alt="product.product_name">
                    <div class="KE-product-info">
                        <div class="KE-product-brand" x-text="product.brand"></div>
                        <div class="KE-product-name" x-text="product.product_name"></div>
                        <div class="KE-price-container">
                            
                            <span :class="product.regular && product.regular > product.prix ? 'KE-product-price-discount' : 'KE-product-price'">
                                <span x-text="'KES ' + product.prix.toLocaleString('en-US')"></span>
                            </span>
                            
                            <template x-if="product.regular && product.regular > product.prix">
                                <span class="KE-old-price">
                                    <span x-text="'KES ' + product.regular.toLocaleString('en-US')"></span>
                                </span>
                            </template>
                            <template x-if="product.percentoff && product.percentoff > 0">
                                <span class="KE-discount-badge">
                                    -<span x-text="product.percentoff.toFixed(0)"></span>%
                                </span>
                            </template>
                        </div>
                    </div>
                </a>
            </div>
        </template>
    </div>
</section>
<!---PRODUCTS END--->
<!---JAVASCRIPT-->
<script src="swiper.js"></script>
<script src="slider.js"></script>
<script src="category.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

 <script>
        // --- 1. GLOBAL DETAILS ---
        const algoliaDetails = {
            app_id: 'V7XWM1B0JY',
            api_search_key: "fa9245e29a66b9d137778d796c557a96",
            index_name: "prod_en",
        };

        // --- 2. GLOBAL HELPER FUNCTION ---
        function updateImageUrl(url) {
            if (typeof url !== 'string' || !url) {
                return 'https://via.placeholder.com/240x240?text=No+Image';
            }
            const newParams = "format=auto&quality:40&f=400x0";
            if (url.indexOf("?") > -1) {
                const urlParts = url.split("?");
                return `${urlParts[0]}?${newParams}`;
            } else {
                return url;
            }
        }

        // --- 3. ALPINE.JS COMPONENT (Prefixed) ---
        document.addEventListener("alpine:init", () => {
            Alpine.data("KE_products", () => ({
                products: [],
                loading: false,
                error: null,
                client: algoliasearch(algoliaDetails.app_id, algoliaDetails.api_search_key),
                index: null,
                
                init() {
                    this.index = this.client.initIndex(algoliaDetails.index_name);
                },

                getScrollAmount() {
                    if (this.$refs.carousel.firstElementChild) {
                        return this.$refs.carousel.firstElementChild.offsetWidth + 16;
                    }
                    return 256; 
                },
                next() {
                    this.$refs.carousel.scrollBy({ left: this.getScrollAmount(), behavior: 'smooth' });
                },
                prev() {
                    this.$refs.carousel.scrollBy({ left: -this.getScrollAmount(), behavior: 'smooth' });
                },

                async getProductsManual(productsArr) {
                    if (this.loading) return;
                    this.loading = true;
                    this.error = null;
                    const filters = productsArr.map(id => `objectID:${id}`).join(' OR ');
                    try {
                        const { hits } = await this.index.search('', { filters: filters });
                        const orderedHits = productsArr.map(id =>
                            hits.find(hit => hit.objectID === id)
                        );
                        this.products = orderedHits.filter(Boolean);
                        if (this.products.length === 0) this.error = "No products found.";
                    } catch (e) {
                        this.error = "Failed to fetch products.";
                    }
                    this.loading = false;
                },

                // --- Price Range logic is already included here ---
                async getProductsFromCategory(prodCount, categoryNumber, priorityObjectIDs = [], priceRange = null, _isFallback = false) {
                    if (this.loading) return;
                    this.loading = true;
                    if (!_isFallback) {
                        this.error = null;
                    }

                    try {
                        let priorityHits = [];
                        if (priorityObjectIDs.length > 0) {
                            const objectIDFilters = priorityObjectIDs.map(id => `objectID:${id}`).join(" OR ");
                            const { hits } = await this.index.search("", { filters: objectIDFilters });
                            priorityHits = priorityObjectIDs
                                .map(id => hits.find(hit => hit.objectID === id))
                                .filter(Boolean);
                        }
                        
                        let categoryFilters = `category = ${categoryNumber}`;
                        if (priceRange) {
                            categoryFilters += ` AND prix: ${priceRange.min} TO ${priceRange.max}`;
                        }

                        const { hits: categoryHits } = await this.index.search("", { 
                            filters: categoryFilters,
                            hitsPerPage: 200
                        });

                        if (categoryHits.length === 0 && priceRange && !_isFallback) {
                            this.error = "No items in that range. Showing all items from the category.";
                            return this.getProductsFromCategory(prodCount, categoryNumber, priorityObjectIDs, null, true);
                        }

                        const priorityHitIDs = priorityHits.map(h => h.objectID);
                        
                        const uniqueCategoryHits = categoryHits
                            .filter(hit => !priorityHitIDs.includes(hit.objectID))
                            .sort((a, b) => (a.prix || 0) - (b.prix || 0)); // Sort by price asc

                        this.products = [...priorityHits, ...uniqueCategoryHits].slice(0, prodCount);

                        if (this.products.length === 0) {
                            this.error = `No products found for category ${categoryNumber}.`;
                        }

                    } catch (e) {
                        this.error = "Failed to search category.";
                    }
                    this.loading = false;
                }
            }));
        });
    </script>